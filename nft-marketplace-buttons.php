<?php
/*
Plugin Name: NFT Marketplace Buttons
Description: Adds buttons to NFT marketplaces using a shortcode.
Version: 1.0.1
Author: Harry Python
*/

// Function to handle the shortcode
function nft_marketplace_buttons_shortcode($atts) {
    // Define default attributes and merge with user-defined attributes
    $atts = shortcode_atts(
        array(
            'contract' => '', // NFT contract address
            'blockchain' => '', // Blockchain name
            'network' => 'mainnet', // Network type (default is mainnet)
            'token_id' => '', // Token ID
            'marketplace' => '' // Marketplace name
        ),
        $atts,
        'smp'
    );

    // Sanitize attributes to prevent XSS attacks
    $contract = esc_attr($atts['contract']);
    $blockchain = esc_attr($atts['blockchain']);
    $network = esc_attr($atts['network']);
    $token_id = esc_attr($atts['token_id']);
    $marketplace = strtolower(esc_attr($atts['marketplace']));

    // Check if required attributes are provided
    if (empty($contract) || empty($blockchain)) {
        return 'Contract address and blockchain are required.';
    }

    if (empty($marketplace)) {
        return 'Marketplace is required.';
    }

    $url = ''; // Initialize URL variable
    $icon = ''; // Initialize icon variable

    // Determine the URL and icon based on the marketplace
    switch ($marketplace) {
        case 'curate-page':
            $marketplace_name = '';
            $url = sprintf('https://www.curate.page/t/%s', $contract);
            $icon = '<svg height="16" viewBox="0 0 908 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M373.155 91.0232V44.0115L352.51 91.0232H341.136L320.603 44.0707V91.0232H304.901V9.35987H323.252L347.044 63.1628L370.836 9.35987H389.186V91.0232H373.155Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M464.204 91.0232L456.426 71.1081H427.135L419.357 91.0232H402.547L433.616 9.35987H450.165L481.233 91.0232H464.204ZM441.726 31.6951L432.603 55.502H450.849L441.726 31.6951Z" fill="#E0E0E2"/>
                    <path d="M545.449 91.0232L510.446 40.6412V91.0232H494.525V9.35987H509.361L543.826 58.5123V9.35987H559.637V91.0232H545.449Z" fill="#E0E0E2"/>
                    <path d="M582.436 91.0232V9.35987H598.686V91.0232H582.436Z" fill="#E0E0E2"/>
                    <path d="M621.453 91.0232V9.35987H675.171V24.8571H637.703V43.7488H671.008V59.3549H637.703V91.0232H621.453Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M690.386 76.0914L690.38 76.0627C689.196 70.7332 688.656 62.0244 688.656 50.1916C688.656 38.3629 689.196 29.683 690.382 24.4188L690.386 24.4008L690.39 24.3829C691.768 18.5657 695.041 14.2054 700.251 11.7537C705.155 9.4462 712.911 8.48926 722.965 8.48926C732.944 8.48926 740.658 9.44588 745.56 11.7493C750.839 14.1945 754.13 18.5575 755.435 24.4019C756.701 29.6933 757.274 38.3843 757.274 50.1916C757.274 62.014 756.699 70.7385 755.434 76.0933C754.124 81.8826 750.822 86.1965 745.56 88.6337C740.658 90.9372 732.944 91.8939 722.965 91.8939C712.911 91.8939 705.155 90.9369 700.251 88.6294C695.059 86.1866 691.777 81.8779 690.393 76.12L690.386 76.0914ZM722.965 76.3966C730.469 76.3966 734.934 75.8977 736.926 75.1832C738.039 74.784 739.23 73.7156 739.893 70.6001C740.613 67.2227 741.024 60.5234 741.024 50.1916C741.024 39.8597 740.613 33.1604 739.893 29.783C739.23 26.6675 738.039 25.5991 736.926 25.1999C734.934 24.4854 730.469 23.9865 722.965 23.9865C715.492 23.9865 710.971 24.4804 708.882 25.2046C707.773 25.6075 706.588 26.6797 705.927 29.783C705.208 33.1604 704.796 39.8597 704.796 50.1916C704.796 60.5234 705.208 67.2227 705.927 70.6001C706.588 73.7035 707.773 74.7757 708.882 75.1785C710.972 75.9027 715.492 76.3966 722.965 76.3966Z" fill="#E0E0E2"/>
                    <path d="M777.482 9.35987H793.732V75.1995H828.9V91.0232H777.482V9.35987Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M844.102 9.35987H871.509C881.973 9.35987 889.975 10.2784 894.993 12.4676C900.351 14.7305 903.77 18.9342 905.174 24.6871C906.448 29.9092 907.023 38.5076 907.023 50.1916C907.023 61.8755 906.448 70.4739 905.174 75.696C903.77 81.4498 900.355 85.6773 895.015 88.0149L894.992 88.0247L894.97 88.0341C889.973 90.1375 881.984 91.0232 871.509 91.0232H844.102V9.35987ZM889.561 30.448L889.553 30.4169C888.895 27.69 887.672 26.5902 886.108 26.1355L886.06 26.1215L886.012 26.106C883.679 25.3528 878.51 24.8571 869.975 24.8571H860.352V75.526H869.975C878.552 75.526 883.787 75.0726 886.17 74.3706C887.802 73.8487 889.016 72.6866 889.664 70.0705C890.432 66.8878 890.883 60.3838 890.883 50.1916C890.883 40.0673 890.393 33.6277 889.569 30.479L889.561 30.448Z" fill="#E0E0E2"/>
                    <path d="M0 0.00891588L34.1157 34.1246L155.546 34.1184L122.011 67.6534L105.681 51.3232H52.3699L101.047 100H154.358L137.149 82.7914H160.184L208.86 34.1157H208.861V34.1146H208.86L174.745 0L0 0.00891588Z" fill="#E0E0E2"/>
                    </svg>';
            break;

        case 'manifold':
            $marketplace_name = '';
            if (!empty($token_id) && is_numeric($token_id)) {
                if ($network === 'mainnet' || empty($network)) {
                    $url = sprintf('https://gallery.manifold.xyz/%s/%s', $contract, $token_id);
                } else {
                    $url = sprintf('https://gallery.manifold.xyz/%s/%s/%s', $network, $contract, $token_id);
                }
            } else {
                if ($network === 'mainnet' || empty($network)) {
                    $url = sprintf('https://gallery.manifold.xyz/%s', $contract);
                } else {
                    $url = sprintf('https://gallery.manifold.xyz/%s/%s', $network, $contract);
                }
            }
            $icon = '<svg height="16" viewBox="0 0 908 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M373.155 91.0232V44.0115L352.51 91.0232H341.136L320.603 44.0707V91.0232H304.901V9.35987H323.252L347.044 63.1628L370.836 9.35987H389.186V91.0232H373.155Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M464.204 91.0232L456.426 71.1081H427.135L419.357 91.0232H402.547L433.616 9.35987H450.165L481.233 91.0232H464.204ZM441.726 31.6951L432.603 55.502H450.849L441.726 31.6951Z" fill="#E0E0E2"/>
                    <path d="M545.449 91.0232L510.446 40.6412V91.0232H494.525V9.35987H509.361L543.826 58.5123V9.35987H559.637V91.0232H545.449Z" fill="#E0E0E2"/>
                    <path d="M582.436 91.0232V9.35987H598.686V91.0232H582.436Z" fill="#E0E0E2"/>
                    <path d="M621.453 91.0232V9.35987H675.171V24.8571H637.703V43.7488H671.008V59.3549H637.703V91.0232H621.453Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M690.386 76.0914L690.38 76.0627C689.196 70.7332 688.656 62.0244 688.656 50.1916C688.656 38.3629 689.196 29.683 690.382 24.4188L690.386 24.4008L690.39 24.3829C691.768 18.5657 695.041 14.2054 700.251 11.7537C705.155 9.4462 712.911 8.48926 722.965 8.48926C732.944 8.48926 740.658 9.44588 745.56 11.7493C750.839 14.1945 754.13 18.5575 755.435 24.4019C756.701 29.6933 757.274 38.3843 757.274 50.1916C757.274 62.014 756.699 70.7385 755.434 76.0933C754.124 81.8826 750.822 86.1965 745.56 88.6337C740.658 90.9372 732.944 91.8939 722.965 91.8939C712.911 91.8939 705.155 90.9369 700.251 88.6294C695.059 86.1866 691.777 81.8779 690.393 76.12L690.386 76.0914ZM722.965 76.3966C730.469 76.3966 734.934 75.8977 736.926 75.1832C738.039 74.784 739.23 73.7156 739.893 70.6001C740.613 67.2227 741.024 60.5234 741.024 50.1916C741.024 39.8597 740.613 33.1604 739.893 29.783C739.23 26.6675 738.039 25.5991 736.926 25.1999C734.934 24.4854 730.469 23.9865 722.965 23.9865C715.492 23.9865 710.971 24.4804 708.882 25.2046C707.773 25.6075 706.588 26.6797 705.927 29.783C705.208 33.1604 704.796 39.8597 704.796 50.1916C704.796 60.5234 705.208 67.2227 705.927 70.6001C706.588 73.7035 707.773 74.7757 708.882 75.1785C710.972 75.9027 715.492 76.3966 722.965 76.3966Z" fill="#E0E0E2"/>
                    <path d="M777.482 9.35987H793.732V75.1995H828.9V91.0232H777.482V9.35987Z" fill="#E0E0E2"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M844.102 9.35987H871.509C881.973 9.35987 889.975 10.2784 894.993 12.4676C900.351 14.7305 903.77 18.9342 905.174 24.6871C906.448 29.9092 907.023 38.5076 907.023 50.1916C907.023 61.8755 906.448 70.4739 905.174 75.696C903.77 81.4498 900.355 85.6773 895.015 88.0149L894.992 88.0247L894.97 88.0341C889.973 90.1375 881.984 91.0232 871.509 91.0232H844.102V9.35987ZM889.561 30.448L889.553 30.4169C888.895 27.69 887.672 26.5902 886.108 26.1355L886.06 26.1215L886.012 26.106C883.679 25.3528 878.51 24.8571 869.975 24.8571H860.352V75.526H869.975C878.552 75.526 883.787 75.0726 886.17 74.3706C887.802 73.8487 889.016 72.6866 889.664 70.0705C890.432 66.8878 890.883 60.3838 890.883 50.1916C890.883 40.0673 890.393 33.6277 889.569 30.479L889.561 30.448Z" fill="#E0E0E2"/>
                    <path d="M0 0.00891588L34.1157 34.1246L155.546 34.1184L122.011 67.6534L105.681 51.3232H52.3699L101.047 100H154.358L137.149 82.7914H160.184L208.86 34.1157H208.861V34.1146H208.86L174.745 0L0 0.00891588Z" fill="#E0E0E2"/>
                    </svg>';
            break;

        case 'rarible':
            $marketplace_name = 'Rarible';
            if (!empty($token_id) && is_numeric($token_id)) {
                if ($network === 'mainnet' || empty($network)) {
                    $url = sprintf('https://rarible.com/token/%s:%s', $contract, $token_id);
                } else {
                    $url = sprintf('https://rarible.com/token/%s/%s:%s', $network, $contract, $token_id);
                }
            } else {
                if ($network === 'mainnet' || empty($network)) {
                    $url = sprintf('https://rarible.com/collection/%s/items', $contract);
                } else {
                    $url = sprintf('https://rarible.com/collection/%s/%s/items', $network, $contract);
                }
            }
            $icon = '<svg width="16" height="16" fill="currentColor" class="bi bi-shop" viewBox="0 0 16 16"><path d="M2.97 1a1 1 0 0 0-.97 1v1h12V2a1 1 0 0 0-.97-1H2.97zM1 4v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1zm2 1h10v8H3V5z"/></svg>';
            break;

        case 'looksrare':
            $marketplace_name = '';
            if (!empty($token_id) && is_numeric($token_id)) {
                $url = sprintf('https://looksrare.org/collections/%s/%s', $contract, $token_id);
            } else {
                $url = sprintf('https://looksrare.org/collections/%s', $contract);
            }
            $icon = '<svg height="16" viewBox="0 0 128 24" focusable="false" class="chakra-icon css-zj9u29"><path d="M10.4736 20.2103H0V4.34119H2.44838V17.966H10.4736V20.2103Z" fill="white"></path><path d="M16.8897 20.5277C15.8317 20.5277 14.8418 20.301 13.9199 19.8476C12.998 19.3791 12.2574 18.699 11.6982 17.8073C11.139 16.9005 10.8594 15.8274 10.8594 14.5881C10.8594 13.3488 11.139 12.2833 11.6982 11.3916C12.2574 10.4848 12.998 9.80471 13.9199 9.35131C14.8418 8.88279 15.8317 8.64853 16.8897 8.64853C17.9325 8.64853 18.9149 8.88279 19.8368 9.35131C20.7587 9.80471 21.4993 10.4848 22.0585 11.3916C22.6177 12.2833 22.8973 13.3488 22.8973 14.5881C22.8973 15.8274 22.6177 16.9005 22.0585 17.8073C21.4993 18.699 20.7587 19.3791 19.8368 19.8476C18.9149 20.301 17.9325 20.5277 16.8897 20.5277ZM16.8897 18.3741C17.5396 18.3741 18.1441 18.2229 18.7033 17.9207C19.2625 17.6033 19.7008 17.1574 20.0182 16.5831C20.3507 16.0088 20.5169 15.3438 20.5169 14.5881C20.5169 13.8325 20.3507 13.1675 20.0182 12.5931C19.7008 12.0188 19.2625 11.5805 18.7033 11.2783C18.1441 10.9609 17.5396 10.8022 16.8897 10.8022C16.2247 10.8022 15.6126 10.9609 15.0534 11.2783C14.5093 11.5805 14.071 12.0188 13.7385 12.5931C13.406 13.1675 13.2398 13.8325 13.2398 14.5881C13.2398 15.3438 13.406 16.0088 13.7385 16.5831C14.071 17.1574 14.5093 17.6033 15.0534 17.9207C15.6126 18.2229 16.2247 18.3741 16.8897 18.3741Z" fill="white"></path><path d="M30.1624 20.5277C29.1044 20.5277 28.1145 20.301 27.1926 19.8476C26.2707 19.3791 25.5301 18.699 24.9709 17.8073C24.4117 16.9005 24.1321 15.8274 24.1321 14.5881C24.1321 13.3488 24.4117 12.2833 24.9709 11.3916C25.5301 10.4848 26.2707 9.80471 27.1926 9.35131C28.1145 8.88279 29.1044 8.64853 30.1624 8.64853C31.2052 8.64853 32.1876 8.88279 33.1095 9.35131C34.0314 9.80471 34.772 10.4848 35.3312 11.3916C35.8904 12.2833 36.17 13.3488 36.17 14.5881C36.17 15.8274 35.8904 16.9005 35.3312 17.8073C34.772 18.699 34.0314 19.3791 33.1095 19.8476C32.1876 20.301 31.2052 20.5277 30.1624 20.5277ZM30.1624 18.3741C30.8123 18.3741 31.4168 18.2229 31.976 17.9207C32.5352 17.6033 32.9735 17.1574 33.2909 16.5831C33.6234 16.0088 33.7896 15.3438 33.7896 14.5881C33.7896 13.8325 33.6234 13.1675 33.2909 12.5931C32.9735 12.0188 32.5352 11.5805 31.976 11.2783C31.4168 10.9609 30.8123 10.8022 30.1624 10.8022C29.4974 10.8022 28.8853 10.9609 28.3261 11.2783C27.782 11.5805 27.3437 12.0188 27.0112 12.5931C26.6787 13.1675 26.5125 13.8325 26.5125 14.5881C26.5125 15.3438 26.6787 16.0088 27.0112 16.5831C27.3437 17.1574 27.782 17.6033 28.3261 17.9207C28.8853 18.2229 29.4974 18.3741 30.1624 18.3741Z" fill="white"></path><path d="M40.4426 20.2103H38.0849V4.34119H40.4426V12.7972L44.3419 8.96591H47.2664L43.2084 12.9332L47.8785 20.2103H45.2034L41.5535 14.5428L40.4426 15.631V20.2103Z" fill="white"></path><path d="M53.0774 20.5277C51.823 20.5277 50.7801 20.2179 49.9489 19.5983C49.1328 18.9786 48.5207 18.1776 48.1126 17.1952L50.0169 16.0164C50.2738 16.8023 50.6668 17.4219 51.1957 17.8753C51.7247 18.3287 52.367 18.5554 53.1227 18.5554C53.7273 18.5554 54.226 18.4118 54.6189 18.1247C55.027 17.8224 55.2311 17.4295 55.2311 16.9458C55.2311 16.4924 55.0195 16.1373 54.5963 15.8803C54.1882 15.6083 53.5232 15.3891 52.6013 15.2229C51.4376 14.9962 50.5005 14.6032 49.7902 14.044C49.095 13.4848 48.7474 12.7292 48.7474 11.777C48.7474 10.8098 49.1328 10.0465 49.9035 9.48733C50.6894 8.92813 51.6492 8.64853 52.7827 8.64853C53.9464 8.64853 54.8834 8.88279 55.5938 9.35131C56.3041 9.80471 56.8709 10.4999 57.294 11.437L55.5711 12.4571C55.3142 11.8072 54.9439 11.3085 54.4603 10.9609C53.9917 10.5982 53.4477 10.4168 52.828 10.4168C52.2537 10.4168 51.7776 10.5302 51.3998 10.7569C51.0219 10.9685 50.833 11.2783 50.833 11.6863C50.833 12.1246 51.0673 12.4874 51.5358 12.7745C52.0194 13.0617 52.7298 13.2959 53.6668 13.4773C54.9363 13.7342 55.8734 14.1347 56.4779 14.6788C57.0976 15.2078 57.4074 15.9408 57.4074 16.8778C57.4074 17.5428 57.2336 18.1549 56.886 18.7141C56.5535 19.2733 56.0547 19.7192 55.3897 20.0517C54.7399 20.369 53.9691 20.5277 53.0774 20.5277Z" fill="white"></path><path d="M59.4783 20.2103V4.34119H66.0074C67.1107 4.34119 68.0628 4.53011 68.8638 4.90794C69.6799 5.27067 70.2996 5.79208 70.7228 6.47219C71.1611 7.15229 71.3802 7.93064 71.3802 8.80722C71.3802 9.97096 71.0553 10.9382 70.4054 11.709C69.7555 12.4647 68.8411 13.0088 67.6623 13.3413L71.5616 20.2103H68.7958L65.0099 13.568H61.9267V20.2103H59.4783ZM65.894 11.4143C66.8915 11.4143 67.6472 11.2103 68.161 10.8022C68.6749 10.379 68.9318 9.75937 68.9318 8.94324C68.9318 8.14223 68.6749 7.53769 68.161 7.12963C67.6472 6.70645 66.8915 6.49486 65.894 6.49486H61.9267V11.4143H65.894Z" fill="white"></path><path d="M76.3197 20.5277C75.2013 20.5277 74.2945 20.2103 73.5992 19.5756C72.904 18.9257 72.5564 18.0793 72.5564 17.0365C72.5564 15.9786 72.9191 15.1473 73.6446 14.5428C74.3852 13.9382 75.3297 13.5453 76.4784 13.3639L80.0602 12.7972V12.3438C80.0602 11.6939 79.8562 11.2027 79.4482 10.8702C79.0552 10.5377 78.4809 10.3715 77.7252 10.3715C76.9847 10.3715 76.4028 10.5226 75.9796 10.8249C75.5716 11.112 75.3675 11.4748 75.3675 11.913C75.3675 12.0188 75.3826 12.1171 75.4129 12.2078L73.3499 12.9105C73.229 12.6234 73.1685 12.3135 73.1685 11.9811C73.1685 11.3916 73.3499 10.8475 73.7126 10.3488C74.0904 9.83494 74.627 9.42687 75.3222 9.12461C76.0174 8.80722 76.8184 8.64853 77.7252 8.64853C79.2366 8.64853 80.3928 8.98103 81.1938 9.64602C82.0099 10.311 82.418 11.2783 82.418 12.5478V17.4219C82.418 18.0567 82.4709 18.5781 82.5767 18.9862C82.6824 19.3791 82.8714 19.7872 83.1434 20.2103H80.763C80.355 19.6814 80.1509 19.0164 80.1509 18.2154C79.8033 18.9408 79.2819 19.5076 78.5867 19.9156C77.9066 20.3237 77.1509 20.5277 76.3197 20.5277ZM76.8184 18.5781C77.7857 18.5781 78.564 18.2305 79.1535 17.5353C79.758 16.8249 80.0602 15.9181 80.0602 14.8148V14.4974L76.9998 15.0189C76.3046 15.1398 75.768 15.3589 75.3902 15.6763C75.0275 15.9937 74.8461 16.4093 74.8461 16.9232C74.8461 17.437 75.0199 17.8451 75.3675 18.1474C75.7302 18.4345 76.2139 18.5781 76.8184 18.5781Z" fill="white"></path><path d="M84.8883 20.2103V8.96591H87.246V10.8702C87.5483 10.1901 87.9715 9.65358 88.5155 9.26063C89.0747 8.85256 89.702 8.64853 90.3972 8.64853C90.7297 8.64853 91.0546 8.69387 91.372 8.78455L90.9866 10.9609C90.6994 10.8551 90.3972 10.8022 90.0798 10.8022C89.2486 10.8022 88.5684 11.1574 88.0395 11.8677C87.5105 12.5629 87.246 13.4244 87.246 14.4521V20.2103H84.8883Z" fill="white"></path><path d="M97.2379 20.5277C96.2102 20.5277 95.2581 20.2784 94.3815 19.7796C93.52 19.2809 92.8323 18.5781 92.3185 17.6713C91.8046 16.7645 91.5477 15.7368 91.5477 14.5881C91.5477 13.4395 91.8046 12.4193 92.3185 11.5276C92.8323 10.6208 93.5276 9.91806 94.4041 9.41932C95.2958 8.90546 96.2782 8.64853 97.3513 8.64853C98.4243 8.64853 99.3689 8.89035 100.185 9.37398C101.016 9.84249 101.659 10.5075 102.112 11.369C102.565 12.2153 102.792 13.1826 102.792 14.2707V15.0869H93.8147C93.8903 16.0995 94.2454 16.9232 94.8802 17.5579C95.515 18.1927 96.316 18.5101 97.2833 18.5101C98.1145 18.5101 98.8022 18.3212 99.3462 17.9433C99.8903 17.5504 100.351 16.9836 100.729 16.2431L102.452 17.2405C101.908 18.3438 101.213 19.1675 100.366 19.7116C99.5201 20.2557 98.4772 20.5277 97.2379 20.5277ZM100.548 13.2506C100.457 12.3891 100.109 11.7166 99.5049 11.2329C98.9004 10.7342 98.1598 10.4848 97.2833 10.4848C96.4369 10.4848 95.7039 10.7493 95.0842 11.2783C94.4646 11.7921 94.0565 12.4496 93.8601 13.2506H100.548Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M117.637 13.7243C115.858 13.7243 114.416 12.2829 114.416 10.5033C114.416 8.72366 115.858 7.28229 117.637 7.28229C119.415 7.28229 120.858 8.72366 120.858 10.5033C120.858 12.2829 119.415 13.7243 117.637 13.7243ZM116.236 10.5033C116.236 11.2771 116.864 11.9037 117.637 11.9037C118.41 11.9037 119.037 11.2771 119.037 10.5033C119.037 9.72954 118.41 9.10286 117.637 9.10286C116.864 9.10286 116.236 9.72954 116.236 10.5033Z" fill="#04CD58"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M107.273 10.5076L113.435 4.34137H121.838L128 10.5076L117.637 20.8665L107.273 10.5076ZM122.398 8.26257C119.78 5.63291 115.493 5.63293 112.875 8.26258L110.634 10.5033L112.875 12.744C115.493 15.3737 119.78 15.3737 122.398 12.744L124.639 10.5033L122.398 8.26257Z" fill="#04CD58"></path></svg>';
            break;

        case 'objkt':
            $marketplace_name = '';
            if (!empty($token_id) && is_numeric($token_id)) {
                $url = sprintf('https://objkt.com/tokens/%s/%s', $contract, $token_id);
            } else {
                $url = sprintf('https://objkt.com/collections/%s', $contract);
            }
            $icon = '<svg height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1354.2 582.2"><path d="M127.09 399.05c-23.31 0-44.59-5.42-63.82-16.28-19.24-10.85-34.6-26.23-46.06-46.16C5.73 316.69 0 293.56 0 267.23c0-24.54 5.73-46.78 17.21-66.7 11.46-19.92 26.82-35.75 46.06-47.5 19.23-11.74 40.51-17.61 63.82-17.61s44.68 5.87 64.1 17.61c19.43 11.74 34.97 27.58 46.62 47.5 11.65 19.93 17.48 42.16 17.48 66.7 0 25.97-5.83 48.92-17.48 68.85s-27.19 35.4-46.62 46.43c-19.42 11.03-40.79 16.54-64.1 16.54Zm0-61.61c9.99 0 18.77-2.92 26.36-8.78 7.58-5.84 13.6-14.02 18.04-24.51 4.44-10.49 6.66-22.8 6.66-36.92 0-15.14-2.22-27.87-6.66-38.2-4.44-10.32-10.46-18.24-18.04-23.74-7.59-5.51-16.37-8.26-26.36-8.26-9.25 0-17.67 2.76-25.25 8.26-7.59 5.51-13.6 13.42-18.04 23.74-4.44 10.33-6.66 23.06-6.66 38.2 0 14.12 2.12 26.42 6.38 36.92 4.25 10.49 10.17 18.67 17.76 24.51 7.58 5.85 16.18 8.78 25.81 8.78Zm274.45 58.28c-7.96-2.22-15.54-5.73-22.75-10.54-7.22-4.8-13.79-10.73-19.7-17.76l-8.33 27.2H288.6V25.53h83.25v6.23c-1.86 2.27-3.05 4.73-3.61 7.36-.55 2.65-.83 7.18-.83 13.6v111.56c3.69-4.44 7.77-8.41 12.21-11.93 4.44-3.51 9.34-6.56 14.71-9.16 5.36-2.58 11-4.53 16.93-5.83 5.91-1.29 12.02-1.94 18.31-1.94 15.9.36 30.25 3.21 43.01 8.54 12.76 5.34 23.67 13.25 32.75 23.74 9.06 10.49 16.09 23.57 21.09 39.22 5 15.66 7.49 33.99 7.49 54.97 0 23.48-2.77 43.85-8.32 61.1-5.55 17.26-13.23 31.49-23.03 42.69-9.81 11.2-21.28 19.56-34.41 25.08-13.14 5.52-27.29 8.27-42.46 8.27-8.14 0-16.19-1.11-24.14-3.33Zm26.36-58.28c5.91-2.59 11-6.74 15.26-12.44 4.25-5.71 7.58-13.14 9.99-22.29 2.4-9.16 3.61-20.14 3.61-32.93 0-11.75-1.02-22.38-3.05-31.89-2.04-9.5-5-17.72-8.88-24.64-3.89-6.91-8.79-12.27-14.71-16.07-5.92-3.8-12.77-5.71-20.54-5.71-9.25 0-16.93 2.77-23.03 8.3s-10.64 13.65-13.6 24.37c-2.97 10.72-4.63 24.02-5 39.92 0 13.14.83 24.54 2.5 34.22s4.25 17.72 7.77 24.12c3.51 6.4 7.77 11.15 12.77 14.26 4.99 3.11 10.82 4.67 17.48 4.67 7.02 0 13.5-1.29 19.42-3.88Zm171.22 141.8c-14.62-7.21-28.22-17.67-40.79-31.36l42.18-55.5 3.33-3.89 5 3.33c.74 2.96 1.39 6.01 1.94 9.16.56 3.14 2.68 7.12 6.38 11.93 4.07 4.07 8.6 7.3 13.6 9.71 5 2.4 11 3.61 18.04 3.61 8.51 0 15.07-1.6 19.7-4.77 4.62-3.18 7.77-8.04 9.43-14.58 1.67-6.54 2.5-14.4 2.5-23.59V202.02h-87.14v-61.05h166.5v235.96c0 26.93-5.37 48.75-16.09 65.46-10.74 16.7-24.52 28.82-41.35 36.37-16.84 7.54-34.69 11.31-53.56 11.31s-35.06-3.61-49.67-10.82ZM714.84 87.69c-12.96 0-23.96-4.34-33.02-13.04-9.07-8.69-13.6-18.96-13.6-30.8 0-12.95 4.34-23.49 13.04-31.64C689.95 4.08 701.14 0 714.84 0c12.21 0 23.03 4.35 32.47 13.04 9.44 8.7 14.15 18.97 14.15 30.8s-4.72 22.11-14.15 30.8c-9.43 8.7-20.26 13.04-32.47 13.04Zm222 199.06-12.77 13.01v94.84h-78.81V25.53h83.25v6.06c-1.86 2.21-3.05 4.6-3.61 7.17-.56 2.58-.83 6.99-.83 13.23v163.77l80.48-79.23c3.33.75 7.02 1.39 11.1 1.94 4.07.55 8.13 1.02 12.21 1.39 4.07.37 7.86.65 11.38.83 3.51.19 6.19.28 8.05.28h40.52l-99.9 98.63 111 154.45-84.36 2.77-77.7-110.07Zm190.36-145.78h209.79l-1.11 61.05h-209.79l1.11-61.05Zm99.9 251.88c-11.47-4.13-21.28-11.13-29.42-21s-14.25-23.42-18.32-40.66c-4.08-17.23-5.55-39.14-4.44-65.71l7.77-183.12 79.92-10.23 5-.54.56 5.89c-1.48 2.5-2.97 4.99-4.44 7.48-1.48 2.5-2.41 6.78-2.78 12.83l-6.66 82.37h3.33l-4.44 80.24c-1.11 20.33-.28 36.11 2.5 47.34 2.78 11.24 6.84 18.99 12.21 23.27 5.36 4.28 11 6.42 16.93 6.42 11.46 0 21.92-2.4 31.36-7.21 9.44-4.8 17.67-10.17 24.7-16.09l13.32 54.94c-12.58 9.25-26.18 16.56-40.79 21.92-14.62 5.36-30.8 8.05-48.56 8.05-13.69 0-26.28-2.06-37.74-6.19ZM754.59 582.2c-5.92 0-10.92-2.04-14.98-6.1-4.07-4.07-6.11-8.97-6.11-14.71s2.03-10.64 6.11-14.71c4.07-4.07 9.06-6.11 14.98-6.11s10.64 2.04 14.71 6.11 6.1 8.98 6.1 14.71-2.04 10.64-6.1 14.71c-4.07 4.07-8.98 6.1-14.71 6.1Zm123.35-4.86c-8.05-3.24-15.08-7.74-21.09-13.51-6.01-5.76-10.68-12.6-14.01-20.53-3.33-7.92-5-16.65-5-26.2s1.67-17.83 5-25.93c3.33-8.1 8-15.17 14.01-21.2 6.01-6.03 13.04-10.81 21.09-14.32s16.88-5.27 26.5-5.27c11.84 0 22.2 2.22 31.08 6.66 8.88 4.44 15.91 10.54 21.09 18.32l-17.48 19.15-1.67 1.94-2.22-1.67c0-1.48-.19-3-.55-4.58-.37-1.57-1.57-3.47-3.61-5.69-3.52-3.51-7.4-5.87-11.66-7.08-4.26-1.2-9.16-1.8-14.71-1.8-4.63 0-9.02.93-13.18 2.79-4.16 1.86-7.91 4.52-11.24 7.97s-5.92 7.75-7.77 12.88c-1.85 5.14-2.77 11.07-2.77 17.8 0 6.03.97 11.47 2.91 16.34 1.94 4.87 4.53 9.04 7.77 12.49 3.23 3.45 7.03 6.11 11.38 7.97 4.34 1.86 8.92 2.79 13.74 2.79 3.89 0 7.67-.56 11.38-1.67 3.7-1.11 7.35-2.82 10.96-5.13 3.61-2.31 6.98-5.41 10.13-9.3l17.48 19.98c-6.85 7.59-14.8 13.09-23.87 16.51-9.07 3.42-18.22 5.13-27.47 5.13s-18.18-1.62-26.22-4.86Zm156.93 4.86c-11.47 0-21.88-2.76-31.22-8.27-9.34-5.52-16.7-13.24-22.06-23.19-5.37-9.94-8.05-21.42-8.05-34.45s2.68-23.68 8.05-33.63c5.36-9.95 12.72-17.81 22.06-23.6 9.34-5.78 19.75-8.68 31.22-8.68s22.15 2.9 31.5 8.68c9.34 5.78 16.74 13.65 22.2 23.6 5.45 9.95 8.19 21.15 8.19 33.63s-2.73 24.5-8.19 34.45c-5.46 9.95-12.86 17.67-22.2 23.19-9.34 5.51-19.84 8.27-31.5 8.27Zm0-24.97c6.1 0 11.38-1.74 15.82-5.22 4.44-3.48 8-8.29 10.68-14.44 2.68-6.15 4.02-13.24 4.02-21.27s-1.34-15.6-4.02-21.66c-2.68-6.06-6.24-10.74-10.68-14.04s-9.71-4.95-15.82-4.95c-5.55 0-10.59 1.65-15.12 4.95-4.54 3.3-8.14 7.98-10.82 14.04-2.68 6.06-4.02 13.29-4.02 21.66s1.29 15.12 3.88 21.27 6.15 10.97 10.68 14.44c4.53 3.48 9.67 5.22 15.4 5.22Zm77.98 22.75V453.16h26.36v9.71c2.22-2.96 4.53-5.36 6.94-7.21 2.4-1.85 4.95-3.19 7.63-4.02 2.68-.83 5.32-1.25 7.91-1.25 3.14 0 6.1.51 8.88 1.53 2.78 1.02 5.32 2.68 7.63 5 2.31 2.32 4.12 5.32 5.41 9.02 2.03-3.51 4.34-6.43 6.94-8.74 2.59-2.31 5.59-4.02 9.02-5.13 3.42-1.11 7.17-1.67 11.24-1.67 4.81 0 8.88.82 12.21 2.45 3.33 1.63 6.06 3.99 8.19 7.08 2.12 3.09 3.65 6.9 4.58 11.43.92 4.54 1.39 9.62 1.39 15.25v93.38h-27.19v-86.51c0-5.42-.28-9.63-.83-12.61-.55-2.98-1.39-5.06-2.5-6.24-1.11-1.17-2.59-1.76-4.44-1.76-2.41 0-4.72 1.13-6.94 3.39-2.22 2.26-4.02 5.34-5.41 9.22s-2.08 8.45-2.08 13.69v80.81h-25.53v-85.7c0-8.68-.65-14.46-1.94-17.36-1.3-2.89-3.7-4.34-7.21-4.34-1.67 0-3.29.55-4.86 1.63-1.57 1.08-2.96 2.67-4.16 4.74-1.21 2.08-2.18 4.7-2.91 7.87-.74 3.17-1.11 6.73-1.11 10.71v82.44h-27.19Z" fill="white"/></svg>';
            break;

        case 'foundation':
            $marketplace_name = 'Foundation';
            if (!empty($token_id) && is_numeric($token_id)) {
                $url = sprintf('https://foundation.app/mint/eth/%s/%s', $contract, $token_id);
            } else {
                $url = sprintf('https://foundation.app/collection/%s', $contract);
            }
            $icon = '<svg width="125" height="40" viewBox="0 0 125 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M72.0979 20.419C72.0979 26.173 67.4315 30.8381 61.6754 30.8381C55.9192 30.8381 51.2542 26.173 51.2542 20.419C51.2542 14.665 55.9198 10 61.676 10C67.4323 10 72.0972 14.665 72.0972 20.419H72.0979ZM41.7037 10.9921C41.7473 10.9167 41.81 10.8541 41.8854 10.8104C41.961 10.7668 42.0466 10.7439 42.1337 10.7439C42.2209 10.7439 42.3065 10.7668 42.3821 10.8104C42.4575 10.8541 42.5202 10.9167 42.5638 10.9921L53.2009 29.4122C53.2446 29.4877 53.2675 29.5733 53.2675 29.6605C53.2675 29.7476 53.2446 29.8332 53.2009 29.9086C53.1573 29.9842 53.0947 30.0468 53.0192 30.0903C52.9437 30.1339 52.8581 30.1569 52.771 30.1569H31.4965C31.4094 30.1569 31.3238 30.1339 31.2483 30.0903C31.1729 30.0468 31.11 29.9842 31.0666 29.9086C31.0229 29.8332 31 29.7476 31 29.6605C31 29.5733 31.0229 29.4877 31.0666 29.4122L41.7037 10.9921ZM74.4538 10.6205C73.906 10.6205 73.4614 11.065 73.4614 11.6132V29.2261C73.4614 29.7744 73.906 30.2182 74.4538 30.2182H92.072C92.6198 30.2182 93.0645 29.7744 93.0645 29.2261V11.6126C93.0645 11.0644 92.6198 10.6199 92.072 10.6199L74.4538 10.6205Z" fill="white"/></svg>';
            break;

        default:
            return 'Invalid marketplace specified.';
    }

    // Generate the HTML output for the button
    $output = '<div class="nft-marketplace-buttons">';
    $output .= sprintf(
        '<a href="%s" target="_blank" class="nft-button">%s %s</a>',
        esc_url($url),
        $icon,
        esc_html($marketplace_name)
    );
    $output .= '</div>';

    return $output;
}

// Function to enqueue styles for the plugin
function nft_marketplace_buttons_enqueue_styles() {
    wp_enqueue_style('nft-marketplace-buttons', plugin_dir_url(__FILE__) . 'style.css');
}

// Register the shortcode and enqueue styles
add_shortcode('smp', 'nft_marketplace_buttons_shortcode');
add_action('wp_enqueue_scripts', 'nft_marketplace_buttons_enqueue_styles');
?>
